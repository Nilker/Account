define(["./core","./core/access","./data/var/dataPriv","./data/var/dataUser"],function(o,c,u,d){var r=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,f=/[A-Z]/g;function v(t,e,a){var n;if(void 0===a&&1===t.nodeType)if(n="data-"+e.replace(f,"-$&").toLowerCase(),"string"==typeof(a=t.getAttribute(n))){try{a="true"===a||"false"!==a&&("null"===a?null:+a+""===a?+a:r.test(a)?o.parseJSON(a):a)}catch(t){}d.set(t,e,a)}else a=void 0;return a}return o.extend({hasData:function(t){return d.hasData(t)||u.hasData(t)},data:function(t,e,a){return d.access(t,e,a)},removeData:function(t,e){d.remove(t,e)},_data:function(t,e,a){return u.access(t,e,a)},_removeData:function(t,e){u.remove(t,e)}}),o.fn.extend({data:function(n,t){var e,a,r,i=this[0],s=i&&i.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){d.set(this,n)}):c(this,function(e){var t,a;if(i&&void 0===e)return void 0!==(t=d.get(i,n)||d.get(i,n.replace(f,"-$&").toLowerCase()))?t:(a=o.camelCase(n),void 0!==(t=d.get(i,a))?t:void 0!==(t=v(i,a,void 0))?t:void 0);a=o.camelCase(n),this.each(function(){var t=d.get(this,a);d.set(this,a,e),-1<n.indexOf("-")&&void 0!==t&&d.set(this,n,e)})},null,t,1<arguments.length,null,!0);if(this.length&&(r=d.get(i),1===i.nodeType&&!u.get(i,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&0===(a=s[e].name).indexOf("data-")&&(a=o.camelCase(a.slice(5)),v(i,a,r[a]));u.set(i,"hasDataAttrs",!0)}return r},removeData:function(t){return this.each(function(){d.remove(this,t)})}}),o});
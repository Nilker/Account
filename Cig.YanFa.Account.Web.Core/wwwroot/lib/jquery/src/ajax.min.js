define(["./core","./var/document","./var/rnotwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./event/trigger","./deferred"],function(b,f,w,C,H,M){var L=/#.*$/,R=/([?&])_=[^&]*/,q=/^(.*?):[ \t]*([^\r\n]*)$/gm,D=/^(?:GET|HEAD)$/,F=/^\/\//,E={},N={},O="*/".concat("*"),$=f.createElement("a");function e(n){return function(e,t){"string"!=typeof e&&(t=e,e="*");var r,a=0,o=e.toLowerCase().match(w)||[];if(b.isFunction(t))for(;r=o[a++];)"+"===r[0]?(r=r.slice(1)||"*",(n[r]=n[r]||[]).unshift(t)):(n[r]=n[r]||[]).push(t)}}function k(t,o,n,s){var i={},c=t===N;function f(e){var a;return i[e]=!0,b.each(t[e]||[],function(e,t){var r=t(o,n,s);return"string"!=typeof r||c||i[r]?c?!(a=r):void 0:(o.dataTypes.unshift(r),f(r),!1)}),a}return f(o.dataTypes[0])||!i["*"]&&f("*")}function r(e,t){var r,a,o=b.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:a=a||{})[r]=t[r]);return a&&b.extend(!0,e,a),e}return $.href=C.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:C.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(C.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":O,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?r(r(e,b.ajaxSettings),t):r(b.ajaxSettings,e)},ajaxPrefilter:e(E),ajaxTransport:e(N),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var d,p,u,r,l,a,h,o,x=b.ajaxSetup({},t),y=x.context||x,m=x.context&&(y.nodeType||y.jquery)?b(y):b.event,v=b.Deferred(),g=b.Callbacks("once memory"),j=x.statusCode||{},n={},s={},T=0,i="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===T){if(!r)for(r={};t=q.exec(u);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===T?u:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return T||(e=s[r]=s[r]||e,n[e]=t),this},overrideMimeType:function(e){return T||(x.mimeType=e),this},statusCode:function(e){var t;if(e)if(T<2)for(t in e)j[t]=[j[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||i;return d&&d.abort(t),c(0,t),this}};if(v.promise(S).complete=g.add,S.success=S.done,S.error=S.fail,x.url=((e||x.url||C.href)+"").replace(L,"").replace(F,C.protocol+"//"),x.type=t.method||t.type||x.method||x.type,x.dataTypes=b.trim(x.dataType||"*").toLowerCase().match(w)||[""],null==x.crossDomain){a=f.createElement("a");try{a.href=x.url,a.href=a.href,x.crossDomain=$.protocol+"//"+$.host!=a.protocol+"//"+a.host}catch(e){x.crossDomain=!0}}if(x.data&&x.processData&&"string"!=typeof x.data&&(x.data=b.param(x.data,x.traditional)),k(E,x,t,S),2===T)return S;for(o in(h=b.event&&x.global)&&0==b.active++&&b.event.trigger("ajaxStart"),x.type=x.type.toUpperCase(),x.hasContent=!D.test(x.type),p=x.url,x.hasContent||(x.data&&(p=x.url+=(M.test(p)?"&":"?")+x.data,delete x.data),!1===x.cache&&(x.url=R.test(p)?p.replace(R,"$1_="+H++):p+(M.test(p)?"&":"?")+"_="+H++)),x.ifModified&&(b.lastModified[p]&&S.setRequestHeader("If-Modified-Since",b.lastModified[p]),b.etag[p]&&S.setRequestHeader("If-None-Match",b.etag[p])),(x.data&&x.hasContent&&!1!==x.contentType||t.contentType)&&S.setRequestHeader("Content-Type",x.contentType),S.setRequestHeader("Accept",x.dataTypes[0]&&x.accepts[x.dataTypes[0]]?x.accepts[x.dataTypes[0]]+("*"!==x.dataTypes[0]?", "+O+"; q=0.01":""):x.accepts["*"]),x.headers)S.setRequestHeader(o,x.headers[o]);if(x.beforeSend&&(!1===x.beforeSend.call(y,S,x)||2===T))return S.abort();for(o in i="abort",{success:1,error:1,complete:1})S[o](x[o]);if(d=k(N,x,t,S)){if(S.readyState=1,h&&m.trigger("ajaxSend",[S,x]),2===T)return S;x.async&&0<x.timeout&&(l=window.setTimeout(function(){S.abort("timeout")},x.timeout));try{T=1,d.send(n,c)}catch(e){if(!(T<2))throw e;c(-1,e)}}else c(-1,"No Transport");function c(e,t,r,a){var o,n,s,i,c,f=t;2!==T&&(T=2,l&&window.clearTimeout(l),d=void 0,u=a||"",S.readyState=0<e?4:0,o=200<=e&&e<300||304===e,r&&(i=function(e,t,r){for(var a,o,n,s,i=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(o in i)if(i[o]&&i[o].test(a)){c.unshift(o);break}if(c[0]in r)n=c[0];else{for(o in r){if(!c[0]||e.converters[o+" "+c[0]]){n=o;break}s=s||o}n=n||s}if(n)return n!==c[0]&&c.unshift(n),r[n]}(x,S,r)),i=function(e,t,r,a){var o,n,s,i,c,f={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)f[s.toLowerCase()]=e.converters[s];for(n=d.shift();n;)if(e.responseFields[n]&&(r[e.responseFields[n]]=t),!c&&a&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=n,n=d.shift())if("*"===n)n=c;else if("*"!==c&&c!==n){if(!(s=f[c+" "+n]||f["* "+n]))for(o in f)if((i=o.split(" "))[1]===n&&(s=f[c+" "+i[0]]||f["* "+i[0]])){!0===s?s=f[o]:!0!==f[o]&&(n=i[0],d.unshift(i[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+n}}}return{state:"success",data:t}}(x,i,S,o),o?(x.ifModified&&((c=S.getResponseHeader("Last-Modified"))&&(b.lastModified[p]=c),(c=S.getResponseHeader("etag"))&&(b.etag[p]=c)),204===e||"HEAD"===x.type?f="nocontent":304===e?f="notmodified":(f=i.state,n=i.data,o=!(s=i.error))):(s=f,!e&&f||(f="error",e<0&&(e=0))),S.status=e,S.statusText=(t||f)+"",o?v.resolveWith(y,[n,f,S]):v.rejectWith(y,[S,f,s]),S.statusCode(j),j=void 0,h&&m.trigger(o?"ajaxSuccess":"ajaxError",[S,x,o?n:s]),g.fireWith(y,[S,f]),h&&(m.trigger("ajaxComplete",[S,x]),--b.active||b.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,r){return b.get(e,t,r,"json")},getScript:function(e,t){return b.get(e,void 0,t,"script")}}),b.each(["get","post"],function(e,o){b[o]=function(e,t,r,a){return b.isFunction(t)&&(a=a||r,r=t,t=void 0),b.ajax(b.extend({url:e,type:o,dataType:a,data:t,success:r},b.isPlainObject(e)&&e))}}),b});